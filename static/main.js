(function(d){function b(a){var b=new Date,b=new Date(b.getFullYear(),b.getMonth(),1);this.loggedIn=!1;this.today=b;this.setupDone=!1;this.apiBuffer=[];var c=this;a.getLoggedIn(function(a){c.loggedIn=a;for(var b=0;b<c.apiBuffer.length;b++)"loggedIn"===c.apiBuffer[b][0]&&(c.apiBuffer[b][1](a),c.apiBuffer.splice(b,1),b--)})}b.prototype.getLoggedIn=function(a){this.setupDone?a(this.loggedIn):this.apiBuffer.push(["loggedIn",a])};b.prototype.getDate=function(){return this.today};b.prototype.setDate=function(a){this.today=
a};b.prototype.yesterday=function(){var a=new Date(this.today);a.setDate(a.getDate()-1);this.today=a};b.prototype.prevMonth=function(){var a=new Date(this.today);a.setMonth(a.getMonth()-1);this.today=a};b.prototype.prevYear=function(){var a=new Date(this.today);a.setFullYear(a.getFullYear()-1);this.today=a};b.prototype.tomorrow=function(){var a=new Date(this.today);a.setDate(a.getDate()+1);this.today=a};b.prototype.nextMonth=function(){var a=new Date(this.today);a.setMonth(a.getMonth()+1);this.today=
a};b.prototype.nextYear=function(){var a=new Date(this.today);a.setFullYear(a.getFullYear()+1);this.today=a};d.Calendar=b})(window);(function(d){function b(a){this.server=a}b.prototype.getBool=function(a){};b.prototype.getLoggedIn=function(a){$.ajax({url:this.server+"user/info",dataType:"json"}).done(function(b){!1===b.successful?a(!1):a(!0)})};b.prototype.login=function(a,b){$.ajax({url:this.server+"user/login?"+a,dataType:"json"}).done(b)};b.prototype.logout=function(a){$.ajax({url:this.server+"user/logout",dataType:"json"}).done(a)};d.API=b})(window);(function(d){function b(a,b,c){this.categories={};this.category=null;this.container=a;this.controls=b;this.overlay=c;this.categories[this.category]=function(){}}b.prototype.display=function(a,b){var c=this;c.categories[a]&&$(c.container).fadeOut(function(){c.category=a;$(this).fadeIn();setTimeout(function(){c.categories[a](c.container,c.controls,b)},10)})};b.prototype.showLogin=function(a){console.log("Showing login.");var b=this,c=$("#user .loginForm",this.controls);c.fadeIn().find(".submit").click(function(d){a(c.serialize(),
function(a){c.fadeOut();a?($(b.controls).addClass("loggedIn"),$(this).unbind("click"),$("input[type!=button]",c).val("")):$("input[type=password]",c).val("");$("input[type=button]",c).attr("disabled",!1)});$(this).attr("disabled","true")})};b.prototype.showLogout=function(a){console.log("Showing logout.");var b=this;$("#user .loginForm",this.controls).hide();$(this.controls).addClass("loggedIn");$("#user .user",this.controls).click(function(c){b.showConfirmation("Are you sure you want to logout?",
function(c){c&&a(function(a){a&&($(b.controls).removeClass("loggedIn"),$(this).unbind("click"))})})})};b.prototype.showConfirmation=function(a,b){var c=confirm(a);b(c)};b.prototype.registerView=function(a,b){this.categories[a]=b};d.UI=b})(window);
